@use 'tailwind' as tw;
@use 'sass-themes' as theme;
@use 'scss-properties' as prop; // dependency of sass-themes

$dark: tw.color(gray, 900);

@layer utilities {
  .theme-light {
    @include theme.create($bg: white, $tx: $dark, $br: tw.color(blue, 600));

    --theme-green: theme('colors.green.800');
    --theme-red: theme('colors.red.800');

    --theme-btn-green: theme('colors.green.300');
    --theme-btn-green--light: theme('colors.green.200');
    --theme-btn-green--dark: theme('colors.green.400');
    --theme-btn-red: theme('colors.red.300');
    --theme-btn-red--light: theme('colors.red.200');
    --theme-btn-red--dark: theme('colors.red.400');
  }

  .theme-dark {
    @include theme.create($bg: $dark, $tx: white, $br: tw.color(blue, 700));

    --theme-green: theme('colors.green.400');
    --theme-red: theme('colors.red.400');

    --theme-btn-green: theme('colors.green.700');
    --theme-btn-green--light: theme('colors.green.600');
    --theme-btn-green--dark: theme('colors.green.800');
    --theme-btn-red: theme('colors.red.700');
    --theme-btn-red--light: theme('colors.red.600');
    --theme-btn-red--dark: theme('colors.red.800');
  }
}

@layer base {
  body {
    @apply theme-light;

    @media (prefers-color-scheme: dark) {
      @apply theme-dark;
    }
  }
}

@layer components {
  .button {
    background-color: var(--theme-br);
    transition-property: background-color;

    &:hover {
      background-color: prop.scale(--theme-br, $lightness: 40%);
    }
    &:active {
      background-color: prop.scale(
        --theme-br,
        $lightness: -40%,
        $saturation: 40%
      );
    }

    &--green {
      background-color: var(--theme-btn-green);
      &:hover {
        background-color: var(--theme-btn-green--light);
      }
      &:active {
        background-color: var(--theme-btn-green--dark);
      }
    }

    &--red {
      background-color: var(--theme-btn-red);
      &:hover {
        background-color: var(--theme-btn-red--light);
      }
      &:active {
        background-color: var(--theme-btn-red--dark);
      }
    }
  }

  .toggle {
    background-color: prop.set(--theme-bg, $lightness: mix --theme-tx 80%);

    &:hover {
      background-color: prop.set(
        --theme-bg,
        $hue: mix --theme-br 0%,
        $saturation: mix --theme-br 20%,
        $lightness: mix --theme-tx 80%
      );
    }

    &--on {
      background-color: var(--theme-br);

      &,
      &:hover {
        color: white;
      }

      &:hover {
        background-color: prop.set(
          --theme-br,
          $lightness: mix --theme-bg 85%,
          $saturation: mix --theme-bg 80%
        );
      }
    }
  }
}
