import type { NextPage } from 'next'
import { useState } from 'react'
import Head from 'next/head'

type WordClass = 'n.' | 'pron.' | 'v.' | 't.v.' | 's.v.' | 'adv.' | 'conj.' | 'g.p.' | 'other'

const wcDict: Record<WordClass, string> = {
  'n.': 'noun',
  'pron.': 'pronoun',
  'v.': 'verb',
  't.v.': 'transitive verb',
  's.v.': 'stative verb',
  'adv.': 'adverb',
  'conj.': 'conjunction',
  'g.p.': 'grammatical particle',
  'other': 'other',
}

type Word = {
  hanzi: string,
  pinyin: string,
  type: WordClass,
  definition: string,
  other?: (Pick<Word, 'definition'> & Partial<Word>)[]
}

const wordlist: Word[] = [
  {
    hanzi: '子',
    pinyin: 'zǐ',
    type: 'n.',
    definition: 'Master / son',
    other: [
      {
        definition: 'daughter'
      },
      {
        type: 's.v.',
        definition: 'to be a son, to act as a son (should)'
      },
    ],
  },
  {
    hanzi: '性',
    pinyin: 'xìng',
    type: 'n.',
    definition: 'nature',
  }
]

const Container = ({ children }: { children: React.ReactNode }) => (
  <div className='flex flex-col flex-center w-screen h-screen'>{ children }</div>
)

const Card = ({ word }: { word: Word }) => {
  const [ showAnswer, setShowAnswer ] = useState(false)
  const flip = () => setShowAnswer(show => !show)

  return (
    <button className='w-40 h-40 flex-center border-4 border-slate-500/10 rounded-2xl text-slate-800' onClick={flip}>
      <h1 className={`text-8xl ${showAnswer ? 'hidden' : ''}`}>{ word.hanzi }</h1>
      <div className={`text-left ${showAnswer ? '' : 'hidden'}`}>
        <p><span className='bold'>pinyin:</span> { word.pinyin }</p>
        <p><span className='bold'>{ word.type }</span> {word.definition}</p>
      </div>
    </button>
  )
}

const Home: NextPage = () => {
  let word = wordlist[0]
  return (
    <Container>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main>{
        <Card word={word}/>
      }</main>
    </Container>
  )
}

export default Home
