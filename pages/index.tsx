import type { NextPage } from 'next'
import { useState } from 'react'
import Head from 'next/head'

type WordClass =
  | 'n.'
  | 'pron.'
  | 'v.'
  | 't.v.'
  | 's.v.'
  | 'adv.'
  | 'conj.'
  | 'g.p.'
  | 'other'

const wcDict: Record<WordClass, string> = {
  'n.': 'noun',
  'pron.': 'pronoun',
  'v.': 'verb',
  't.v.': 'transitive verb',
  's.v.': 'stative verb',
  'adv.': 'adverb',
  'conj.': 'conjunction',
  'g.p.': 'grammatical particle',
  other: 'other',
}

type Word = {
  hanzi: string
  pinyin: string
  type: WordClass
  lesson: number
  definition: string
  other?: WordVariant[]
}
type WordVariant = Pick<Word, 'definition'> &
  Partial<Pick<Word, 'pinyin' | 'type'>>

const wordlist: Word[] = [
  {
    hanzi: '子',
    pinyin: 'zǐ',
    lesson: 1,
    type: 'n.',
    definition: 'Master / son',
    other: [
      {
        definition: 'daughter',
      },
      {
        type: 's.v.',
        definition: 'to be a son, to act as a son (should)',
      },
    ],
  },
  {
    hanzi: '性',
    pinyin: 'xìng',
    lesson: 1,
    type: 'n.',
    definition: 'nature',
  },
]

const Container = ({ children }: { children: React.ReactNode }) => (
  <div className="flex-center h-screen w-screen flex-col">{children}</div>
)

const Card = ({ word }: { word: Word }) => {
  const [showAnswer, setShowAnswer] = useState(false)
  const flip = () => setShowAnswer(show => !show)

  return (
    <button
      className="flex-center h-40 w-40 rounded-2xl border-4 border-slate-500/10 text-slate-800"
      onClick={flip}
    >
      <h1 className={`text-8xl ${showAnswer ? 'hidden' : ''}`}>{word.hanzi}</h1>
      <div className={`text-left ${showAnswer ? '' : 'hidden'}`}>
        <p>
          <span className="bold">pinyin:</span> {word.pinyin}
        </p>
        <p>
          <span className="bold">{word.type}</span> {word.definition}
        </p>
      </div>
    </button>
  )
}

const Home: NextPage = () => {
  let word = wordlist[0]
  return (
    <Container>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main>{<Card word={word} />}</main>
    </Container>
  )
}

export default Home
